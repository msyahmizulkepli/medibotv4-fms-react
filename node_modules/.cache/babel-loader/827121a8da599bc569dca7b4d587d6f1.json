{"ast":null,"code":"import _classCallCheck from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/src/components/Connection.jsx\";\nimport React, { Component } from \"react\";\nimport { Alert, Spinner } from \"react-bootstrap\";\nimport Config from \"../scripts/config\";\n\nvar Connection = /*#__PURE__*/function (_Component) {\n  _inherits(Connection, _Component);\n\n  function Connection() {\n    var _this;\n\n    _classCallCheck(this, Connection);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Connection).call(this));\n    _this.state = {\n      connected: false,\n      ros: null\n    };\n\n    _this.init_connection();\n\n    return _this;\n  }\n\n  _createClass(Connection, [{\n    key: \"init_connection\",\n    value: function init_connection() {\n      var _this2 = this;\n\n      this.state.ros = new window.ROSLIB.Ros();\n      console.log(this.state.ros);\n      this.state.ros.on(\"connection\", function () {\n        console.info(\"Connected to ROS:CONNECTION\");\n\n        _this2.setState({\n          connected: true\n        });\n      });\n      this.state.ros.on(\"close\", function () {\n        console.warn(\"Disconnected from ROS:CONNECTION\");\n\n        _this2.setState({\n          connected: false\n        });\n\n        setTimeout(function () {\n          try {\n            _this2.state.ros.connect(\"ws://\" + Config.ROSBRIDGE_SERVER_IP + \":\" + Config.ROSBRIDGE_SERVER_PORT + \"\");\n          } catch (error) {\n            console.error(\"Connection problem : CONNECTION\");\n          }\n        }, Config.RECONNECTION_TIMER);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Alert, {\n        className: \"text-center m-3\",\n        variant: this.state.connected ? \"success\" : \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }\n      }, this.state.connected ? \"Robot Connected\" : \"Robot Disconnected\"));\n    }\n  }]);\n\n  return Connection;\n}(Component);\n\nexport default Connection;","map":{"version":3,"names":["React","Component","Alert","Spinner","Config","Connection","state","connected","ros","init_connection","window","ROSLIB","Ros","console","log","on","info","setState","warn","setTimeout","connect","ROSBRIDGE_SERVER_IP","ROSBRIDGE_SERVER_PORT","error","RECONNECTION_TIMER"],"sources":["/Users/msyahmizulkepli/Documents/medibotv4-fms-react/src/components/Connection.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport {Alert, Spinner} from \"react-bootstrap\";\nimport Config from \"../scripts/config\";\n\nclass Connection extends Component {\n\tstate = {\n\t\tconnected : false,\n\t\tros : null\n\t};\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.init_connection();\n\t}\n\n\tinit_connection(){\n\t\tthis.state.ros = new window.ROSLIB.Ros();\n\t\tconsole.log(this.state.ros);\n\n\t\tthis.state.ros.on(\"connection\", () => {\n\t\t\tconsole.info(\"Connected to ROS:CONNECTION\");\n\t\t\tthis.setState({connected:true});\n\t\t});\n\n\t\tthis.state.ros.on(\"close\", () => {\n\t\t\tconsole.warn(\"Disconnected from ROS:CONNECTION\");\n\t\t\tthis.setState({connected:false});\n\t\t\tsetTimeout(()=>{\n\t\t\t\ttry{\n\t\t\t\t\tthis.state.ros.connect(\n\t\t\t\t\t\t\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\"\n\t\t\t\t\t);\n\t\t\t\t}catch(error){\n\t\t\t\t\tconsole.error(\"Connection problem : CONNECTION\");\n\t\t\t\t}\n\t\t\t},Config.RECONNECTION_TIMER);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t\t<div>\n                    <Alert className=\"text-center m-3\" variant={this.state.connected?\"success\":\"danger\"}>\n\t\t\t\t\t\t{this.state.connected? \"Robot Connected\": \"Robot Disconnected\"}\n\t\t\t\t\t</Alert>\n\t\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Connection;"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,KAAR,EAAeC,OAAf,QAA6B,iBAA7B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;;IAEMC,U;;;EAML,sBAAc;IAAA;;IAAA;;IACb;IADa,MALdC,KAKc,GALN;MACPC,SAAS,EAAG,KADL;MAEPC,GAAG,EAAG;IAFC,CAKM;;IAEb,MAAKC,eAAL;;IAFa;EAGb;;;;sCAEgB;MAAA;;MAChB,KAAKH,KAAL,CAAWE,GAAX,GAAiB,IAAIE,MAAM,CAACC,MAAP,CAAcC,GAAlB,EAAjB;MACAC,OAAO,CAACC,GAAR,CAAY,KAAKR,KAAL,CAAWE,GAAvB;MAEA,KAAKF,KAAL,CAAWE,GAAX,CAAeO,EAAf,CAAkB,YAAlB,EAAgC,YAAM;QACrCF,OAAO,CAACG,IAAR,CAAa,6BAAb;;QACA,MAAI,CAACC,QAAL,CAAc;UAACV,SAAS,EAAC;QAAX,CAAd;MACA,CAHD;MAKA,KAAKD,KAAL,CAAWE,GAAX,CAAeO,EAAf,CAAkB,OAAlB,EAA2B,YAAM;QAChCF,OAAO,CAACK,IAAR,CAAa,kCAAb;;QACA,MAAI,CAACD,QAAL,CAAc;UAACV,SAAS,EAAC;QAAX,CAAd;;QACAY,UAAU,CAAC,YAAI;UACd,IAAG;YACF,MAAI,CAACb,KAAL,CAAWE,GAAX,CAAeY,OAAf,CACC,UAAQhB,MAAM,CAACiB,mBAAf,GAAmC,GAAnC,GAAuCjB,MAAM,CAACkB,qBAA9C,GAAoE,EADrE;UAGA,CAJD,CAIC,OAAMC,KAAN,EAAY;YACZV,OAAO,CAACU,KAAR,CAAc,iCAAd;UACA;QACD,CARS,EAQRnB,MAAM,CAACoB,kBARC,CAAV;MASA,CAZD;IAaA;;;6BAEQ;MACR,oBACE;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,gBACgB,oBAAC,KAAD;QAAO,SAAS,EAAC,iBAAjB;QAAmC,OAAO,EAAE,KAAKlB,KAAL,CAAWC,SAAX,GAAqB,SAArB,GAA+B,QAA3E;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACb,KAAKD,KAAL,CAAWC,SAAX,GAAsB,iBAAtB,GAAyC,oBAD5B,CADhB,CADF;IAOA;;;;EA3CuBN,S;;AA8CzB,eAAeI,UAAf"},"metadata":{},"sourceType":"module"}