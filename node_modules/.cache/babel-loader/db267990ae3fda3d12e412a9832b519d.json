{"ast":null,"code":"import _classCallCheck from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/msyahmizulkepli/Documents/medibotv4-fms-react/src/components/Map.jsx\";\nimport React, { Component } from \"react\";\nimport { Row, Col, Form, Button, ButtonGroup, ListGroup, FloatingLabel, Modal, Alert } from \"react-bootstrap\";\nimport { IoNavigate, IoCloseCircleOutline, IoLocation, IoRemoveOutline, IoAddOutline, IoCaretBack, IoCaretForward, IoCaretUp, IoCaretDown, IoNavigateOutline, IoSaveOutline, IoTrashOutline } from \"react-icons/io5\";\nimport { VscClearAll } from \"react-icons/vsc\";\nimport Config from \"../scripts/config\";\nimport Teleoperation from \"./Teleoperation\";\nwindow.navigation = false;\nwindow.homing = false;\n\nvar Map = /*#__PURE__*/function (_Component) {\n  _inherits(Map, _Component);\n\n  function Map() {\n    var _this;\n\n    _classCallCheck(this, Map);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Map).call(this));\n    _this.state = {\n      ros: null,\n      viewer: null,\n      show_path: true,\n      pathView: null,\n      pathTopic: null,\n      label: [],\n      show_set_spot: false,\n      goal_status: {\n        message: \"Doing nothing. Waiting for goal...\",\n        variant: \"info\",\n        show: true\n      }\n    };\n    _this.view_map = _this.view_map.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.showPath = _this.showPath.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.hidePath = _this.hidePath.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getSpot = _this.getSpot.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setSpot = _this.setSpot.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.sendGoal = _this.sendGoal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Map, [{\n    key: \"init_connection\",\n    value: function init_connection() {\n      var _this2 = this;\n\n      // eslint-disable-next-line\n      this.state.ros = new window.ROSLIB.Ros();\n      this.state.ros.on(\"connection\", function () {\n        console.info(\"Connected to ROS:MAP\");\n\n        _this2.setState({\n          connected: true\n        });\n      });\n      this.state.ros.on(\"close\", function () {\n        console.warn(\"Disconnected from ROS:MAP\");\n\n        _this2.setState({\n          connected: false\n        }); //try to reconnect every 3 seconds\n\n\n        setTimeout(function () {\n          try {\n            _this2.state.ros.connect(\"ws://\" + Config.ROSBRIDGE_SERVER_IP + \":\" + Config.ROSBRIDGE_SERVER_PORT + \"\");\n          } catch (error) {\n            console.error(\"Connection problem : MAP\");\n          }\n        }, Config.RECONNECTION_TIMER);\n      });\n\n      try {\n        this.state.ros.connect(\"ws://\" + Config.ROSBRIDGE_SERVER_IP + \":\" + Config.ROSBRIDGE_SERVER_PORT + \"\");\n      } catch (error) {\n        console.error(\"Connection problem : MAP\");\n      }\n\n      this.state.ros.on(\"error\", function (error) {// console.log('Error connecting to ROS: ', error);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.init_connection();\n      this.view_map();\n      this.getGoalStatus();\n      this.getSpot();\n      this.showPath();\n    }\n  }, {\n    key: \"view_map\",\n    value: function view_map() {\n      // eslint-disable-next-line\n      this.state.viewer = new window.ROS2D.Viewer({\n        divID: \"nav_div\",\n        width: 640,\n        height: 480\n      }); // eslint-disable-next-line\n\n      var navClient = new window.NAV2D.OccupancyGridClientNav({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene,\n        viewer: this.state.viewer,\n        serverName: '/move_base',\n        withOrientation: true,\n        continuous: true\n      }); // eslint-disable-next-line\n      // var imageMapClientNav = new NAV2D.ImageMapClientNav({\n      //        ros: this.state.ros,\n      //        viewer: this.state.viewer,\n      //        rootObject: this.state.viewer.scene,\n      //        serverName: '/move_base',\n      //        image: `/static/{value}.png`\n      //    });\n      //    imageMapClientNav.addImg();\n      //    imageMapClientNav.removeImg();\n    }\n  }, {\n    key: \"navigation\",\n    value: function navigation() {\n      if (this.state.pathView == null && this.state.pathTopic == null && this.state.show_path) {\n        this.showPath();\n      }\n\n      try {\n        window.navigation = true;\n        window.homing = false;\n      } catch (error) {\n        console.error(\"window.navigation or window.homing problem\");\n      }\n    }\n  }, {\n    key: \"localize\",\n    value: function localize() {\n      if (this.state.pathView == null && this.state.pathTopic == null && this.state.show_path) {\n        this.showPath();\n      }\n\n      try {\n        window.navigation = false;\n        window.homing = true;\n      } catch (error) {\n        console.error(\"window.navigation or window.homing problem\");\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      try {\n        window.navigation = false;\n        window.homing = false;\n      } catch (error) {\n        console.error(\"window.navigation or window.homing problem\");\n      }\n\n      var move_base_stop = new window.ROSLIB.Topic({\n        ros: this.state.ros,\n        name: '/move_base/cancel',\n        messageType: 'actionlib_msgs/GoalID'\n      });\n      var move_base_stop_msg = new window.ROSLIB.Message({\n        id: ''\n      });\n      move_base_stop.publish(move_base_stop_msg);\n      this.hidePath(true);\n    }\n  }, {\n    key: \"showPath\",\n    value: function showPath() {\n      var _this3 = this;\n\n      this.setState({\n        show_path: true\n      });\n\n      if (this.state.pathView == null && this.state.pathTopic == null) {\n        this.state.pathView = new window.ROS2D.PathShape({\n          ros: this.state.ros,\n          strokeSize: 0.2,\n          strokeColor: \"green\"\n        });\n        this.state.viewer.scene.addChild(this.state.pathView);\n        this.state.pathTopic = new window.ROSLIB.Topic({\n          ros: this.state.ros,\n          name: '/move_base/NavfnROS/plan',\n          messageType: 'nav_msgs/Path'\n        });\n        this.state.pathTopic.subscribe(function (message) {\n          try {\n            _this3.state.pathView.setPath(message);\n          } catch (error) {\n            console.error(\"show path error\");\n          }\n        });\n      }\n    }\n  }, {\n    key: \"hidePath\",\n    value: function hidePath() {\n      var isStopping = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!isStopping) {\n        this.setState({\n          show_path: false\n        });\n      }\n\n      this.state.viewer.scene.removeChild(this.state.pathView);\n\n      if (this.state.pathTopic) {\n        this.state.pathTopic.unsubscribe();\n      }\n\n      this.setState({\n        pathView: null\n      });\n      this.setState({\n        pathTopic: null\n      });\n    }\n  }, {\n    key: \"zoomInMap\",\n    value: function zoomInMap() {\n      var zoom = new window.ROS2D.ZoomView({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene\n      });\n      zoom.startZoom(250, 250);\n      zoom.zoom(1.2);\n    }\n  }, {\n    key: \"zoomOutMap\",\n    value: function zoomOutMap() {\n      var zoom = new window.ROS2D.ZoomView({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene\n      });\n      zoom.startZoom(250, 250);\n      zoom.zoom(0.8);\n    }\n  }, {\n    key: \"panUpMap\",\n    value: function panUpMap() {\n      var pan = new window.ROS2D.PanView({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene\n      });\n      pan.startPan(250, 250);\n      pan.pan(250, 300);\n    }\n  }, {\n    key: \"panDownMap\",\n    value: function panDownMap() {\n      var pan = new window.ROS2D.PanView({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene\n      });\n      pan.startPan(250, 250);\n      pan.pan(250, 200);\n    }\n  }, {\n    key: \"panRightMap\",\n    value: function panRightMap() {\n      var pan = new window.ROS2D.PanView({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene\n      });\n      pan.startPan(250, 250);\n      pan.pan(200, 250);\n    }\n  }, {\n    key: \"panLeftMap\",\n    value: function panLeftMap() {\n      var pan = new window.ROS2D.PanView({\n        ros: this.state.ros,\n        rootObject: this.state.viewer.scene\n      });\n      pan.startPan(250, 250);\n      pan.pan(300, 250);\n    }\n  }, {\n    key: \"getSpot\",\n    value: function getSpot() {\n      var _this4 = this;\n\n      var get_spot = new window.ROSLIB.Service({\n        ros: this.state.ros,\n        name: '/spots/get_spot',\n        serviceType: 'medibotv4/GetSpot'\n      });\n      var request = new window.ROSLIB.ServiceRequest({});\n      var i,\n          temp_label = [];\n      get_spot.callService(request, function (result) {\n        for (i = 0; i < result.label.length; i++) {\n          temp_label.push(result.label[i].toString());\n        }\n      });\n      setTimeout(function () {\n        _this4.setState({\n          label: []\n        });\n\n        _this4.setState({\n          label: _this4.state.label.concat(temp_label)\n        });\n      }, 500);\n    }\n  }, {\n    key: \"sendGoal\",\n    value: function sendGoal() {\n      var _this5 = this;\n\n      console.log(this.refs.select_spot_form_ref.value);\n      var send_goal = new window.ROSLIB.Service({\n        ros: this.state.ros,\n        name: '/spots/send_goal',\n        serviceType: 'medibotv4/SendGoal'\n      });\n      var request = new window.ROSLIB.ServiceRequest({\n        label: this.refs.select_spot_form_ref.value\n      });\n      send_goal.callService(request, function (result) {\n        console.log(result.success);\n        console.log(result.message);\n      });\n      setTimeout(function () {\n        if (_this5.state.pathView == null && _this5.state.pathTopic == null && _this5.state.show_path) {\n          _this5.showPath();\n        }\n      }, 100);\n    }\n  }, {\n    key: \"getGoalStatus\",\n    value: function getGoalStatus() {\n      var _this6 = this;\n\n      var goal_status_sub = new window.ROSLIB.Topic({\n        ros: this.state.ros,\n        name: '/move_base/status',\n        messageType: 'actionlib_msgs/GoalStatusArray'\n      });\n      goal_status_sub.subscribe(function (message) {\n        var i;\n\n        for (i = 0; i < message.status_list.length; i++) {\n          if (message.status_list[i].status === 1) {\n            _this6.setState({\n              goal_status: {\n                message: \"Goal received. Moving there...\",\n                variant: \"warning\",\n                status: true\n              }\n            });\n          }\n        }\n      });\n      var goal_result_sub = new window.ROSLIB.Topic({\n        ros: this.state.ros,\n        name: '/move_base/result',\n        messageType: 'move_base_msgs/MoveBaseActionResult'\n      });\n      goal_result_sub.subscribe(function (message) {\n        if (message.status.status === 2) {\n          _this6.setState({\n            goal_status: {\n              message: \"Goal canceled.\",\n              variant: \"danger\",\n              status: true\n            }\n          });\n        } else if (message.status.status === 3) {\n          _this6.setState({\n            goal_status: {\n              message: \"Goal reached successfully.\",\n              variant: \"success\",\n              status: true\n            }\n          });\n\n          _this6.hidePath(true);\n        }\n\n        setTimeout(function () {\n          _this6.setState({\n            goal_status: {\n              message: \"Doing nothing. Waiting for goal...\",\n              variant: \"info\",\n              status: true\n            }\n          });\n        }, 5000);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n        variant: \"light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Alert, {\n        variant: this.state.goal_status.variant,\n        show: this.state.goal_status.show,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 25\n        }\n      }, this.state.goal_status.message), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        id: \"nav_div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 37\n        }\n      }, \"Map\")), /*#__PURE__*/React.createElement(Row, {\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(ButtonGroup, {\n        horizontal: true,\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          _this7.localize();\n        },\n        variant: \"success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 45\n        }\n      }, \" LOCALIZE \", /*#__PURE__*/React.createElement(IoLocation, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 113\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          _this7.navigation();\n        },\n        variant: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 45\n        }\n      }, \"NAVIGATE \", /*#__PURE__*/React.createElement(IoNavigate, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 114\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          _this7.stop();\n        },\n        variant: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 45\n        }\n      }, \"STOP \", /*#__PURE__*/React.createElement(IoCloseCircleOutline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 103\n        }\n      })))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 39\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 48\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Form.Check, {\n        label: \"SHOW PATH\",\n        type: \"switch\",\n        id: \"show-path-switch\",\n        checked: this.state.show_path ? true : false,\n        onChange: function onChange() {\n          _this7.state.show_path ? _this7.hidePath() : _this7.showPath();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 41\n        }\n      })))), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 43\n        }\n      }))))));\n    }\n  }]);\n\n  return Map;\n}(Component);\n\nexport default Map;","map":{"version":3,"names":["React","Component","Row","Col","Form","Button","ButtonGroup","ListGroup","FloatingLabel","Modal","Alert","IoNavigate","IoCloseCircleOutline","IoLocation","IoRemoveOutline","IoAddOutline","IoCaretBack","IoCaretForward","IoCaretUp","IoCaretDown","IoNavigateOutline","IoSaveOutline","IoTrashOutline","VscClearAll","Config","Teleoperation","window","navigation","homing","Map","state","ros","viewer","show_path","pathView","pathTopic","label","show_set_spot","goal_status","message","variant","show","view_map","bind","showPath","hidePath","getSpot","setSpot","sendGoal","ROSLIB","Ros","on","console","info","setState","connected","warn","setTimeout","connect","ROSBRIDGE_SERVER_IP","ROSBRIDGE_SERVER_PORT","error","RECONNECTION_TIMER","init_connection","getGoalStatus","ROS2D","Viewer","divID","width","height","navClient","NAV2D","OccupancyGridClientNav","rootObject","scene","serverName","withOrientation","continuous","move_base_stop","Topic","name","messageType","move_base_stop_msg","Message","id","publish","PathShape","strokeSize","strokeColor","addChild","subscribe","setPath","isStopping","removeChild","unsubscribe","zoom","ZoomView","startZoom","pan","PanView","startPan","get_spot","Service","serviceType","request","ServiceRequest","i","temp_label","callService","result","length","push","toString","concat","log","refs","select_spot_form_ref","value","send_goal","success","goal_status_sub","status_list","status","goal_result_sub","localize","stop"],"sources":["/Users/msyahmizulkepli/Documents/medibotv4-fms-react/src/components/Map.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport {Row, Col, Form, Button, ButtonGroup, ListGroup, FloatingLabel, Modal, Alert} from \"react-bootstrap\";\nimport { IoNavigate, IoCloseCircleOutline, IoLocation, IoRemoveOutline, IoAddOutline, IoCaretBack, IoCaretForward, IoCaretUp, IoCaretDown, IoNavigateOutline, IoSaveOutline, IoTrashOutline } from \"react-icons/io5\";\nimport { VscClearAll } from \"react-icons/vsc\";\nimport Config from \"../scripts/config\";\nimport Teleoperation from \"./Teleoperation\";\nwindow.navigation = false;\nwindow.homing = false;\n\nclass Map extends Component {\n    state = {\n        ros:null,\n\t\tviewer:null,\n\t\tshow_path:true,\n\t\tpathView:null,\n\t\tpathTopic:null,\n\t\tlabel:[],\n\t\tshow_set_spot:false,\n\t\tgoal_status:{message: \"Doing nothing. Waiting for goal...\",variant: \"info\",show:true}\n    };\n\n    constructor(){\n\t\tsuper();\n\t\tthis.view_map = this.view_map.bind(this);\n\t\tthis.showPath = this.showPath.bind(this);\n\t\tthis.hidePath = this.hidePath.bind(this);\n\t\tthis.getSpot = this.getSpot.bind(this);\n\t\tthis.setSpot = this.setSpot.bind(this);\n\t\tthis.sendGoal = this.sendGoal.bind(this);\n\t}\n\n    init_connection(){\n\t\t// eslint-disable-next-line\n\t\tthis.state.ros = new window.ROSLIB.Ros();\n\n\t\tthis.state.ros.on(\"connection\", () => {\n\t\t\tconsole.info(\"Connected to ROS:MAP\");\n\t\t\tthis.setState({connected:true});\n\t\t});\n\n\t\tthis.state.ros.on(\"close\", () => {\n\t\t\tconsole.warn(\"Disconnected from ROS:MAP\");\n\t\t\tthis.setState({connected:false});\n\t\t\t//try to reconnect every 3 seconds\n\t\t\tsetTimeout(()=>{\n\t\t\t\ttry{\n\t\t\t\t\tthis.state.ros.connect(\n\t\t\t\t\t\t\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\"\n\t\t\t\t\t);\n\t\t\t\t}catch(error){\n\t\t\t\t\tconsole.error(\"Connection problem : MAP\");\n\t\t\t\t}\n\t\t\t},Config.RECONNECTION_TIMER);\n\t\t});\n\n\t\ttry{\n\t\t\tthis.state.ros.connect(\n\t\t\t\t\"ws://\"+Config.ROSBRIDGE_SERVER_IP+\":\"+Config.ROSBRIDGE_SERVER_PORT+\"\"\n\t\t\t);\n\t\t}catch(error){\n\t\t\tconsole.error(\"Connection problem : MAP\");\n\t\t}\n\n\t\tthis.state.ros.on(\"error\", (error) => {\n\t\t\t// console.log('Error connecting to ROS: ', error);\n\t\t});\n\t}\n\n    componentDidMount(){\n\t\tthis.init_connection();\n\t\tthis.view_map();\n\t\tthis.getGoalStatus();\n\t\tthis.getSpot();\n\t\tthis.showPath();\n\t}\n\n    view_map(){\n\t\t// eslint-disable-next-line\n\t\tthis.state.viewer = new window.ROS2D.Viewer({\n\t\t\tdivID: \"nav_div\",\n\t\t\twidth: 640,\n\t\t\theight: 480,\n\t\t});\n\t\t// eslint-disable-next-line\n\t\tvar navClient = new window.NAV2D.OccupancyGridClientNav({\n\t\t\tros: this.state.ros,\n\t\t\trootObject: this.state.viewer.scene,\n\t\t\tviewer: this.state.viewer,\n\t\t\tserverName: '/move_base',\n\t\t\twithOrientation: true,\n\t\t\tcontinuous: true,\n\t\t});\n\t\t// eslint-disable-next-line\n\t\t// var imageMapClientNav = new NAV2D.ImageMapClientNav({\n\t //        ros: this.state.ros,\n\t //        viewer: this.state.viewer,\n\t //        rootObject: this.state.viewer.scene,\n\t //        serverName: '/move_base',\n\t //        image: `/static/{value}.png`\n\t //    });\n\t //    imageMapClientNav.addImg();\n\t //    imageMapClientNav.removeImg();\n\t}\n\n    navigation(){\n\t\tif(this.state.pathView==null && this.state.pathTopic==null && this.state.show_path){\n\t\t\tthis.showPath();\n\t\t}\n\t\ttry{\n\t\t\twindow.navigation = true;\n\t\t\twindow.homing = false;\n\t\t}catch(error){\n\t\t\tconsole.error(\"window.navigation or window.homing problem\");\n\t\t}\n\t}\n\n\tlocalize(){\n\t\tif(this.state.pathView==null && this.state.pathTopic==null && this.state.show_path){\n\t\t\tthis.showPath();\n\t\t}\n\t\ttry{\n\t\t\twindow.navigation = false;\n\t\t\twindow.homing = true;\n\t\t}catch(error){\n\t\t\tconsole.error(\"window.navigation or window.homing problem\");\n\t\t}\n\t}\n\n\tstop(){\n\t\ttry{\n\t\t\twindow.navigation = false;\n\t\t\twindow.homing = false;\n\t\t}catch(error){\n\t\t\tconsole.error(\"window.navigation or window.homing problem\");\n\t\t}\n\t\tvar move_base_stop = new window.ROSLIB.Topic({\n\t        ros: this.state.ros,\n\t        name: '/move_base/cancel',\n\t        messageType: 'actionlib_msgs/GoalID'\n\t    });\n\t    var move_base_stop_msg = new window.ROSLIB.Message({\n\t        id: ''\n\t    });\n\t    move_base_stop.publish(move_base_stop_msg);\n\t    this.hidePath(true);\n\t}\n\n\tshowPath(){\n\t\tthis.setState({show_path:true});\n\t\tif(this.state.pathView==null && this.state.pathTopic==null){\n\t\t\tthis.state.pathView = new window.ROS2D.PathShape({\n\t            ros: this.state.ros,\n\t            strokeSize: 0.2,\n\t            strokeColor: \"green\",\n\t        });\n\n\t        this.state.viewer.scene.addChild(this.state.pathView);\n\n\t        this.state.pathTopic = new window.ROSLIB.Topic({\n\t            ros: this.state.ros,\n\t            name: '/move_base/NavfnROS/plan',\n\t            messageType: 'nav_msgs/Path'\n\t        });\n\n\t        this.state.pathTopic.subscribe((message)=>{\n\t        \ttry{\n\t        \t\tthis.state.pathView.setPath(message);\n\t        \t}catch(error){\n\t        \t\tconsole.error(\"show path error\");\n\t        \t}\n\t            \n\t        });\n\t\t}\n\t}\n\n\thidePath(isStopping=false){\n\t\tif(!isStopping){\n\t\t\tthis.setState({show_path:false});\n\t\t}\n\t\t\n        this.state.viewer.scene.removeChild(this.state.pathView);\n        if (this.state.pathTopic) {\n            this.state.pathTopic.unsubscribe();\n        }\n        this.setState({pathView:null});\n        this.setState({pathTopic:null});\n\t}\n\n    zoomInMap(){\n        var zoom = new window.ROS2D.ZoomView({\n            ros: this.state.ros,\n            rootObject: this.state.viewer.scene\n        });\n        zoom.startZoom(250, 250);\n        zoom.zoom(1.2);\n    }\n\n    zoomOutMap(){\n        var zoom = new window.ROS2D.ZoomView({\n            ros: this.state.ros,\n            rootObject: this.state.viewer.scene\n        });\n        zoom.startZoom(250, 250);\n        zoom.zoom(0.8);\n    }\n\n\n    panUpMap(){\n        var pan = new window.ROS2D.PanView({\n            ros: this.state.ros,\n            rootObject: this.state.viewer.scene\n        });\n        pan.startPan(250, 250);\n        pan.pan(250,300);\n    }\n\n    panDownMap(){\n        var pan = new window.ROS2D.PanView({\n            ros: this.state.ros,\n            rootObject: this.state.viewer.scene\n        });\n        pan.startPan(250, 250);\n        pan.pan(250,200);\n    }\n\n    panRightMap(){\n        var pan = new window.ROS2D.PanView({\n            ros: this.state.ros,\n            rootObject: this.state.viewer.scene\n        });\n        pan.startPan(250, 250);\n        pan.pan(200,250);\n    }\n\n    panLeftMap(){\n        var pan = new window.ROS2D.PanView({\n            ros: this.state.ros,\n            rootObject: this.state.viewer.scene\n        });\n        pan.startPan(250, 250);\n        pan.pan(300,250);\n    }\n\n    getSpot(){\n\t\tvar get_spot = new window.ROSLIB.Service({\n\t\t\tros : this.state.ros,\n\t\t\tname : '/spots/get_spot',\n\t\t\tserviceType : 'medibotv4/GetSpot'\n\t\t});\n\n\t\tvar request = new window.ROSLIB.ServiceRequest({});\n\t\tvar i, temp_label=[];\n\t\tget_spot.callService(request, function(result) {\n\t\t\tfor(i=0; i<result.label.length; i++){\n\t\t\t\ttemp_label.push(result.label[i].toString());\n\t\t\t}\n\t\t});\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({ label: []});\n\t\t\tthis.setState({ label: this.state.label.concat(temp_label)});\n\t\t}, 500);\n    }\n\n    sendGoal(){\n    \tconsole.log(this.refs.select_spot_form_ref.value);\n\n\n    \tvar send_goal = new window.ROSLIB.Service({\n\t\t\tros : this.state.ros,\n\t\t\tname : '/spots/send_goal',\n\t\t\tserviceType : 'medibotv4/SendGoal'\n\t\t});\n\n\t\tvar request = new window.ROSLIB.ServiceRequest({\n\t\t\tlabel: this.refs.select_spot_form_ref.value\n\t\t});\n\n\t\tsend_goal.callService(request, function(result) {\n\t\t\tconsole.log(result.success);\n\t\t\tconsole.log(result.message);\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tif(this.state.pathView==null && this.state.pathTopic==null && this.state.show_path){\n\t\t\t\tthis.showPath();\n\t\t\t}\n\t\t}, 100);\t\n    }\n\n\n\tgetGoalStatus(){\n\t\tvar goal_status_sub = new window.ROSLIB.Topic({\n\t\t\tros : this.state.ros,\n\t\t\tname : '/move_base/status',\n\t\t\tmessageType : 'actionlib_msgs/GoalStatusArray'\n\t\t});\n\t\tgoal_status_sub.subscribe((message)=>{\n\t\t\tvar i;\n\t\t\tfor(i=0; i<message.status_list.length; i++){\n\t\t\t\tif(message.status_list[i].status === 1){\n\t\t\t\t\tthis.setState({goal_status:{message:\"Goal received. Moving there...\",variant:\"warning\",status:true}});\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t});\n\n\t\tvar goal_result_sub = new window.ROSLIB.Topic({\n\t\t\tros : this.state.ros,\n\t\t\tname : '/move_base/result',\n\t\t\tmessageType : 'move_base_msgs/MoveBaseActionResult'\n\t\t});\n\t\tgoal_result_sub.subscribe((message)=>{\n\t\t\tif(message.status.status === 2){\n\t\t\t\tthis.setState({goal_status:{message:\"Goal canceled.\",variant:\"danger\",status:true}});\n\t\t\t}\n\t\t\telse if(message.status.status === 3){\n\t\t\t\tthis.setState({goal_status:{message:\"Goal reached successfully.\",variant:\"success\",status:true}});\n\t\t\t\tthis.hidePath(true);\n\t\t\t}\t\n\t\t\tsetTimeout(() => {this.setState({goal_status:{message:\"Doing nothing. Waiting for goal...\",variant:\"info\",status:true}});}, 5000);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t\t<div>\n                    <ListGroup.Item variant=\"light\">\n                        <Alert variant={this.state.goal_status.variant} show={this.state.goal_status.show}>\n                            {this.state.goal_status.message}\n                        </Alert>\n                        <Row>\n                            <Col>\n                                <Row>\n                                    <p id=\"nav_div\">Map</p>\n                                </Row>\n                                <Row align=\"center\">\n                                        <ButtonGroup horizontal size=\"lg\">\n                                            <Button onClick={()=>{this.localize()}} variant=\"success\"> LOCALIZE <IoLocation/></Button>\n                                            <Button onClick={()=>{this.navigation()}} variant=\"primary\">NAVIGATE <IoNavigate/></Button>\n                                            <Button onClick={()=>{this.stop()}} variant=\"danger\">STOP <IoCloseCircleOutline/></Button>\n                                        </ButtonGroup>\n                                </Row><br></br>\n                                <Row align=\"center\">\n                                    <Col></Col><Col>\n                                        <h6>\n                                        <Form>\n                                        <Form.Check label=\"SHOW PATH\" type=\"switch\" id=\"show-path-switch\" checked={this.state.show_path?true:false} onChange={()=>{this.state.show_path?this.hidePath():this.showPath()}}/>\n                                        </Form>\n                                        </h6>\n                                    </Col><Col></Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    </ListGroup.Item>\n\t\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Map;"],"mappings":"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"},"metadata":{},"sourceType":"module"}